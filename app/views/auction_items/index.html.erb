<% provide(:title, 'Auction Items') %>
<h1>Auction Items (<%= @category_name %>)</h1>

<% cache("category_menu") do %>
<div class="row">
<div class="col-sm-2">
  <%= render 'shared/category_menu' %>
</div>
<% end %>

<% if @auction_items.nil? %>
  <% get_all_auction_items %>
<% end %>
<div class="col-sm-10">
  <%= will_paginate %>

  <% pos = 0 %> 
  <% if !@auction_items.nil? %>
    <% @auction_items.each do |auction_item| %>
      <% addRow = pos%3 == 0 %>
      <% if addRow %>
        <div class="row">
      <% end %>
        <div class="col-xs-12 col-sm-4">
          <%= render 'auction_item', auction_item: auction_item %>
        </div>
      <% endRow = (((pos+1)%3) == 0) || (auction_item == @auction_items.last) %>
      <% if endRow %>
        </div>
      <% end %>
      <% pos += 1 %>
    <% end %>
  <% end %>

  <%= will_paginate %>
</div>
</div>
